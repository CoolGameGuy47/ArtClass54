<!DOCTYPE html>


<!-- Ultimate Game Stash file--> 
<!-- For the regularly updating doc go to https://docs.google.com/document/d/1_FmH3BlSBQI7FGgAQL59-ZPe8eCxs35wel6JUyVaG8Q/ -->




<html lang="en-us">
  <head>
    <base href="https://cdn.jsdelivr.net/gh/bubbls/UGS-Assets@main/ultimate%20car%20driving/">
      <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Ultimate Car Driving Game</title>
    <link rel="shortcut icon" href="TemplateData/img/favicon.ico">
    <link rel="stylesheet" href="TemplateData/css/style.css">
</head>
<body>
  
		<div class="keepRatio">
		<div id="gameContainer" class="unity-desktop webgl-content">
			<canvas id="gameCanvas"></canvas>
			<div id="loadingBlock">
				<img class="logo" src="TemplateData/img/Logo.png"></img>
				<span class="subtitle"><br>
				</span>
			
				<div id="progressBar">
					<div>LOADING ...</div>
					<div class="centered">
						<div id="emptyBar"></div>
						<div id="fullBar"></div>
					</div>
				</div>
				
				<div id="warningBrowserBlock" style="display:none;">
					<div class="warningBrowserText">
					</div>
					<div class="browserIcons">
					</div>
				</div>
				<div id="warningMobileBlock" style="display:none;">
					<div class="warningBrowserText">
						Please note that Unity WebGL is not currently supported on mobiles.
					</div>
				</div>
			</div>
		
			<div id="errorBrowserBlock" style="display:none;">
				<img class="logo" src="TemplateData/img/Logo.png"></img>
				<span class="subtitle">  <br>
				</span>
				
				<div id="errorContent" style="display:none;">
					<div class="errorBrowserText">
					</div>
					<div class="browserIcons">
					</div>
				</div>
			</div>
			
		</div>
    </div>
	
	<script>
		window.mergedBlobUrls = {};
		window.assetsReady = false;

		async function mergeSplitFile(fileUrlBase, numParts = 2) {
			const partUrls = Array.from({ length: numParts }, (_, i) => 
				`${fileUrlBase}.part${i + 1}`
			);

			try {
				const responses = await Promise.all(
					partUrls.map(url => fetch(url))
				);

				if (responses.some(r => !r.ok)) {
					return null;
				}

				const parts = await Promise.all(
					responses.map(r => r.arrayBuffer())
				);

				const combinedBlob = new Blob(parts, {
					type: 'application/octet-stream'
				});

				return URL.createObjectURL(combinedBlob);
			} catch (error) {
				return null;
			}
		}

		function setupXHRInterceptor() {
			if (window.xhrInterceptorInstalled) {
				return;
			}
			
			const originalOpen = XMLHttpRequest.prototype.open;
			const originalSend = XMLHttpRequest.prototype.send;

			XMLHttpRequest.prototype.open = function(method, url, ...args) {
				this._url = url;
				this._method = method;
				this._args = args;
				
				let finalUrl = url;
				
				for (const [filename, blobUrl] of Object.entries(window.mergedBlobUrls)) {
					if (url.includes(filename)) {
						finalUrl = blobUrl;
						break;
					}
				}
				
				return originalOpen.call(this, method, finalUrl, ...args);
			};

			XMLHttpRequest.prototype.send = function(...args) {
				const xhr = this;
				
				if (!window.assetsReady) {
					const checkReady = setInterval(() => {
						if (window.assetsReady) {
							clearInterval(checkReady);
							originalSend.apply(xhr, args);
						}
					}, 50);
					return;
				}
				
				return originalSend.apply(this, args);
			};
			
			window.xhrInterceptorInstalled = true;
		}

		function setupFetchInterceptor() {
			if (window.fetchInterceptorInstalled) {
				return;
			}

			const originalFetch = window.fetch;
			window.fetch = function(url, ...args) {
				let finalUrl = url;
				
				for (const [filename, blobUrl] of Object.entries(window.mergedBlobUrls)) {
					if (typeof url === 'string' && url.includes(filename)) {
						finalUrl = blobUrl;
						break;
					}
				}
				
				return originalFetch.call(this, finalUrl, ...args);
			};

			window.fetchInterceptorInstalled = true;
		}

		async function prepareGameAssets() {
			try {
				window.assetsReady = false;
				delete window.xhrInterceptorInstalled;
				delete window.fetchInterceptorInstalled;
				window.mergedBlobUrls = {};
				
				setupXHRInterceptor();
				setupFetchInterceptor();
				
				const filesToMerge = [
					{ filename: 'Build/0aff4ee936778b905d874c8c2fb40213.data.unityweb', parts: 3 }
				];
				
				for (const file of filesToMerge) {
					const blobUrl = await mergeSplitFile(file.filename, file.parts);
					if (blobUrl) {
						window.mergedBlobUrls[file.filename] = blobUrl;
					}
				}
				
				window.assetsPrepared = true;
				window.assetsReady = true;
				
			} catch (error) {
				window.assetsPrepared = false;
				window.assetsReady = true;
			}
		}

		prepareGameAssets().then(() => {
			initUnity();
		});

		function ToggleFullScreen() {
			var isInFullScreen = (document.fullscreenElement && document.fullscreenElement !== null) ||
			(document.webkitFullscreenElement && document.webkitFullscreenElement !== null) ||
			(document.msFullscreenElement && document.msFullscreenElement !== null);
			
			var element = document.body.getElementsByClassName("webgl-content")[0];
			
			if (!isInFullScreen) {
				if (element.webkitRequestFullscreen) {
					element.webkitRequestFullscreen();
				} else if (element.msRequestFullscreen) { 
					element.msRequestFullscreen();
				} else if (element.requestFullscreen) {
					element.requestFullscreen();
				} 
			}
			else {
				if (document.exitFullscreen) {
					document.exitFullscreen();
				} else if (document.webkitExitFullscreen) {
					document.webkitExitFullscreen();
				} else if (document.msExitFullscreen) {
					document.msExitFullscreen();
				}
			}
		}
		
		function CheckCompatibility()
		{
			if (!hasWebGL()){
				document.getElementById("errorBrowserBlock").style.display = "inherit";
			}
			else if ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) )
			{
				document.getElementById("warningMobileBlock").style.display = "inherit";
			}
			else if (!isFirefox&&!isSafari&&!isChrome) {
				document.getElementById("warningBrowserBlock").style.display = "inherit";
			}
		}
		
		function hasWebGL() {
			var supported;
			try {
				var canvas = document.createElement('canvas');
				supported = !! window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl'));
			} catch(e) { supported = false; }

			try {
				eval('let foo = 123;');
			} catch (e) { supported = false; }
			canvas = undefined;
			return supported;
		}

		var isFirefox = typeof InstallTrigger !== 'undefined';
		var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window['safari'] || (typeof safari !== 'undefined' && safari.pushNotification));
		
		var isChromium = window.chrome;
		var winNav = window.navigator;
		var vendorName = winNav.vendor;
		var isOpera = typeof window.opr !== "undefined";
		var isIEedge = winNav.userAgent.indexOf("Edge") > -1;
		var isIOSChrome = winNav.userAgent.match("CriOS");
		var isChrome = isIOSChrome || (isChromium !== null && typeof isChromium !== "undefined" && vendorName === "Google Inc." && isOpera === false && isIEedge === false);

		function initUnity() {
			var buildUrl = "Build";
			var loaderUrl = buildUrl + "/fb9502bc7610d9c812fd76745164ef27.js";
			var config = {
				dataUrl: buildUrl + "/0aff4ee936778b905d874c8c2fb40213.data.unityweb",
				frameworkUrl: buildUrl + "/59f116a01ba156009be1331a920ead96.js.unityweb",
				codeUrl: buildUrl + "/c04f87f256d6238c834e76a761d263d1.wasm.unityweb",
				streamingAssetsUrl: "StreamingAssets",
				companyName: "Gamebol",
				productName: "Ultimate Car Driving",
				productVersion: "1.0",
			};

			var container = document.querySelector("#gameContainer");
			var canvas = document.querySelector("#gameCanvas");
			var loadingBar = document.querySelector("#loadingBlock");
			var progressBarFull = document.querySelector("#fullBar");
			var progressBarEmpty = document.querySelector("#emptyBar");

			if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
				container.className = "unity-mobile";
				config.devicePixelRatio = 1;
			}
			CheckCompatibility();

			var script = document.createElement("script");
			script.src = loaderUrl;
			script.onload = () => {
				createUnityInstance(canvas, config, (progress) => {
					progressBarFull.style.width = 100 * progress + "%";	 	
					progressBarEmpty.style.width = (100 * (1 - progress)) + "%";
				}).then((unityInstance) => {
					loadingBar.style.display = "none";
				}).catch((message) => {
					alert(message);
				});
			};
			document.body.appendChild(script);
		}
    </script>
    <script src="game.js"></script>
  
		                          <!-- Downloaded From Noah's Tutoring Hub -->
		                          <script>
		                              console.log('%cðŸ”„ Loading game downloaded from Noah\'s Tutoring Hub', 'color: #c27c15; font-weight: bold;');
		                          </script>

		                          <div id="noahs-watermark"
		                               onclick="window.open('https://noahs-calculus-tutor.pages.dev/', '_blank'); this.style.transform='scale(0.95)'; setTimeout(() => this.style.transform='scale(1)', 100);"
		                               ontouchstart="this.style.opacity='0.7';"
		                               ontouchend="this.style.opacity='0.9'; setTimeout(() => window.open('https://noahs-calculus-tutor.pages.dev/', '_blank'), 100);"
		                               style="
		                                  all: initial !important;
		                                  position: fixed !important;
		                                  bottom: 10px !important;
		                                  right: 10px !important;
		                                  background: rgba(0, 0, 0, 0.85) !important;
		                                  color: #c27c15 !important;
		                                  padding: 8px 12px !important;
		                                  border-radius: 5px !important;
		                                  font-family: 'Courier New', monospace !important;
		                                  font-size: 12px !important;
		                                  z-index: 2147483647 !important;
		                                  border: 1px solid #c27c15 !important;
		                                  opacity: 0.9 !important;
		                                  pointer-events: auto !important;
		                                  cursor: pointer !important;
		                                  display: flex !important;
		                                  align-items: center !important;
		                                  gap: 8px !important;
		                                  backdrop-filter: blur(4px) !important;
		                                  box-shadow: 0 0 15px rgba(194, 124, 21, 0.4) !important;
		                                  transition: opacity 0.2s, transform 0.1s !important;
		                                  user-select: none !important;
		                                  -webkit-tap-highlight-color: transparent !important;
		                              ">
		                              <img src="https://raw.githubusercontent.com/NoahsAmazingTutoringHelp/Noahs-Calculus-Tutor/master/cuh.png"
		                                   alt="Noah's Tutoring Hub"
		                                   style="width: 16px !important; height: 16px !important; border-radius: 3px !important; pointer-events: none !important;"
		                                   onerror="this.style.display='none'">
		                              <span style="pointer-events: none !important;">Downloaded from Noah's Tutoring Hub</span>
		                          </div>
		                       
		                          <script>
		                              (function() {
		                                  var gameTitle = "Ultimate Car Driving Game";

		                                  function createWatermark() {
		                                      const watermark = document.createElement('div');
		                                      watermark.id = 'noahs-watermark';

		                                      const logo = document.createElement('img');
		                                      logo.src = 'https://raw.githubusercontent.com/NoahsAmazingTutoringHelp/Noahs-Calculus-Tutor/master/cuh.png';
		                                      logo.alt = "Noah's Tutoring Hub";
		                                      logo.style.cssText = 'width: 16px !important; height: 16px !important; border-radius: 3px !important; display: block !important; pointer-events: none !important;';

		                                      const text = document.createElement('span');
		                                      text.textContent = 'Downloaded from Noah\'s Tutoring Hub';
		                                      text.style.cssText = 'pointer-events: none !important;';

		                                      watermark.appendChild(logo);
		                                      watermark.appendChild(text);

		                                      watermark.setAttribute('style',
		                                          'all: initial !important;' +
		                                          'position: fixed !important;' +
		                                          'bottom: 10px !important;' +
		                                          'right: 10px !important;' +
		                                          'background: rgba(0, 0, 0, 0.85) !important;' +
		                                          'color: #c27c15 !important;' +
		                                          'padding: 8px 12px !important;' +
		                                          'border-radius: 5px !important;' +
		                                          'font-family: \'Courier New\', monospace !important;' +
		                                          'font-size: 12px !important;' +
		                                          'z-index: 2147483647 !important;' +
		                                          'border: 1px solid #c27c15 !important;' +
		                                          'opacity: 0.9 !important;' +
		                                          'pointer-events: auto !important;' +
		                                          'cursor: pointer !important;' +
		                                          'display: flex !important;' +
		                                          'align-items: center !important;' +
		                                          'gap: 8px !important;' +
		                                          'backdrop-filter: blur(4px) !important;' +
		                                          'box-shadow: 0 0 15px rgba(194, 124, 21, 0.4) !important;' +
		                                          'transition: opacity 0.2s, transform 0.1s, box-shadow 0.2s, border-color 0.2s !important;' +
		                                          'user-select: none !important;' +
		                                          '-webkit-tap-highlight-color: transparent !important;'
		                                      );

		                                      logo.onerror = function() {
		                                          this.style.display = 'none';
		                                          watermark.setAttribute('style', watermark.getAttribute('style') + 'padding-left: 12px !important;');
		                                      };

		                                      watermark.setAttribute('role', 'button');
		                                      watermark.setAttribute('aria-label', 'Visit Noah\'s Tutoring Hub website');
		                                      watermark.setAttribute('tabindex', '0');

		                                      watermark.addEventListener('click', function(e) {
		                                          e.preventDefault();
		                                          e.stopPropagation();

		                                          this.style.transform = 'scale(0.95) !important';
		                                          this.style.transition = 'transform 0.1s !important';

		                                          setTimeout(() => {
		                                              this.style.transform = 'scale(1) !important';
		                                              window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
		                                          }, 100);
		                                      });

		                                      watermark.addEventListener('touchstart', function(e) {
		                                          e.preventDefault();
		                                          e.stopPropagation();
		                                          this.style.opacity = '0.7 !important';
		                                      });

		                                      watermark.addEventListener('touchend', function(e) {
		                                          e.preventDefault();
		                                          e.stopPropagation();
		                                          this.style.opacity = '0.9 !important';

		                                          this.style.transform = 'scale(0.95) !important';

		                                          setTimeout(() => {
		                                              this.style.transform = 'scale(1) !important';
		                                              window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
		                                          }, 100);
		                                      });

		                                      watermark.addEventListener('keydown', function(e) {
		                                          if (e.key === 'Enter' || e.key === ' ') {
		                                              e.preventDefault();
		                                              window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
		                                          }
		                                      });

		                                      watermark.addEventListener('mouseenter', function() {
		                                          this.style.opacity = '1 !important';
		                                          this.style.transform = 'translateY(-2px) !important';
		                                          this.style.boxShadow = '0 0 25px rgba(194, 124, 21, 0.8) !important';
		                                          this.style.borderColor = '#e69500 !important';
		                                      });

		                                      watermark.addEventListener('mouseleave', function() {
		                                          this.style.opacity = '0.9 !important';
		                                          this.style.transform = 'translateY(0) !important';
		                                          this.style.boxShadow = '0 0 15px rgba(194, 124, 21, 0.4) !important';
		                                          this.style.borderColor = '#c27c15 !important';
		                                      });

		                                      watermark.addEventListener('contextmenu', function(e) {
		                                          e.preventDefault();
		                                          return false;
		                                      });

		                                      return watermark;
		                                  }

		                                  function addWatermark() {
		                                      const existing = document.getElementById('noahs-watermark');
		                                      if (!existing) {
		                                          document.body.appendChild(createWatermark());
		                                      }
		                                  }

		                                  function protectWatermark() {
		                                      addWatermark();

		                                      const observer = new MutationObserver(function(mutations) {
		                                          mutations.forEach(function(mutation) {
		                                              if (mutation.removedNodes) {
		                                                  Array.from(mutation.removedNodes).forEach(function(node) {
		                                                      if (node.id === 'noahs-watermark' ||
		                                                          (node.querySelector && node.querySelector('#noahs-watermark'))) {
		                                                          setTimeout(addWatermark, 100);
		                                                      }
		                                                  });
		                                              }
		                                          });
		                                      });

		                                      observer.observe(document.body, {
		                                          childList: true,
		                                          subtree: true
		                                      });

		                                      setInterval(addWatermark, 5000);
		                                  }

		                                  if (document.readyState === 'loading') {
		                                      document.addEventListener('DOMContentLoaded', protectWatermark);
		                                  } else {
		                                      protectWatermark();
		                                  }

		                                  console.log('%cðŸŽ® Game: "' + gameTitle + '", Downloaded from Noah\'s Tutoring Hub',
		                                      'color: #c27c15; font-weight: bold; font-size: 14px;');
		                                  console.log('%cðŸ“š Visit https://noahs-calculus-tutor.pages.dev/ for more games!',
		                                      'color: #e69500;');
		                              })();
		                          </script>
		                       </body>
</html>