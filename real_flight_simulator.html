<html lang="en-us">

<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NMNKZYDPP8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NMNKZYDPP8');
</script>
  <meta charset="utf-8">
  <base href="https://cdn.jsdelivr.net/gh/bubbls/UGS-Assets@main/flight%20sim/">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Unity WebGL Player | George and the Printer</title>
  <link rel="shortcut icon" href="TemplateData/favicon.ico">
  <link rel="stylesheet" href="TemplateData/style.css">
  <script src="Build/UnityLoader.js"></script>
  <script>
    function mergeFiles(fileParts) {
      return new Promise((resolve, reject) => {
        let buffers = [];
        function fetchPart(i) {
          if (i >= fileParts.length) {
            let mergedBlob = new Blob(buffers);
            resolve(mergedBlob);
            return;
          }
          fetch(fileParts[i])
            .then(r => r.arrayBuffer())
            .then(data => {
              buffers.push(data);
              fetchPart(i + 1);
            })
            .catch(reject);
        }
        fetchPart(0);
      });
    }

    function getParts(file, start, end) {
      let arr = [];
      for (let i = start; i <= end; i++) {
        arr.push(file + ".part" + i);
      }
      return arr;
    }

    function resizeUnityContainer() {
      var container = document.getElementById("gameContainer");
      if (container) {
        container.style.width = window.innerWidth + "px";
        container.style.height = window.innerHeight + "px";
      }
    }

    window.addEventListener('resize', resizeUnityContainer);

    function UnityProgress(gameInstance, progress) {
      try {
        if (progress === 'complete') {
          return;
        }
        var pct = 0;
        if (typeof progress === 'number') pct = progress;
        else if (progress && progress.total && progress.loaded) pct = progress.loaded / progress.total;
        var txt = document.getElementById('loading-text');
        if (txt) txt.textContent = 'Loading... ' + Math.round(pct * 100) + '%';
      } catch (e) {
        console.error('Progress error:', e);
      }
    }

    window.addEventListener("load", function () {
      window.unityMergedFiles = {};
      
      Promise.all([
        mergeFiles(getParts("Build/game.data.unityweb", 1, 2)),
        mergeFiles(getParts("Build/game.asm.code.unityweb", 1, 1)), 
        mergeFiles(getParts("Build/game.asm.memory.unityweb", 1, 1)),
        mergeFiles(getParts("Build/game.asm.framework.unityweb", 1, 1))
      ]).then(([dataBlob, wasmCodeBlob, wasmMemoryBlob, wasmFrameworkBlob]) => {
        window.unityMergedFiles['Build/game.data.unityweb'] = URL.createObjectURL(dataBlob);
        window.unityMergedFiles['Build/game.asm.code.unityweb'] = URL.createObjectURL(wasmCodeBlob);
        window.unityMergedFiles['Build/game.asm.memory.unityweb'] = URL.createObjectURL(wasmMemoryBlob);
        window.unityMergedFiles['Build/game.asm.framework.unityweb'] = URL.createObjectURL(wasmFrameworkBlob);
        
        console.log("Merged files ready:", Object.keys(window.unityMergedFiles));
        
        const originalFetch = window.fetch;
        window.fetch = function(url, ...args) {
          if (typeof url === 'string' && window.unityMergedFiles[url]) {
            console.log("Redirecting fetch to merged file:", url);
            return originalFetch(window.unityMergedFiles[url], ...args);
          }
          return originalFetch(url, ...args);
        };
        
        const OriginalXHR = window.XMLHttpRequest;
        window.XMLHttpRequest = function() {
          const xhr = new OriginalXHR();
          const originalOpen = xhr.open;
          
          xhr.open = function(method, url, ...args) {
            if (typeof url === 'string' && window.unityMergedFiles[url]) {
              console.log("Redirecting XHR to merged file:", url);
              return originalOpen.call(this, method, window.unityMergedFiles[url], ...args);
            }
            return originalOpen.call(this, method, url, ...args);
          };
          
          return xhr;
        };
        
        // Load Unity
        window.gameInstance = UnityLoader.instantiate("gameContainer", "Build/game.json", {
          onProgress: UnityProgress,
          Module: {
            onRuntimeInitialized: function () {
              resizeUnityContainer();
              let loadingText = document.querySelector("#loading-text");
              if (loadingText) loadingText.remove();
              UnityProgress(window.gameInstance, 'complete');
            }
          }
        });
      })
      .catch(err => {
        console.error("Unity load failed:", err);
        let txt = document.getElementById('loading-text');
        if (txt) txt.textContent = 'Loading failed: ' + err.message;
      });
    });
  </script>
</head>

<body>
  <div class="webgl-content">
    <div id="gameContainer" style="width: 960px; height: 600px">
      <p id="loading-text">Loading...</p>
    </div>
    <div class="footer">
      <div class="webgl-logo"></div>
      <div class="fullscreen" onclick="window.gameInstance && window.gameInstance.SetFullscreen(1)"></div>
    </div>
  </div>

		                          <!-- Downloaded From Noah's Tutoring Hub -->
		                          <script>
		                              console.log('%cðŸ”„ Loading game downloaded from Noah\'s Tutoring Hub', 'color: #c27c15; font-weight: bold;');
		                          </script>

		                          <div id="noahs-watermark"
		                               onclick="window.open('https://noahs-calculus-tutor.pages.dev/', '_blank'); this.style.transform='scale(0.95)'; setTimeout(() => this.style.transform='scale(1)', 100);"
		                               ontouchstart="this.style.opacity='0.7';"
		                               ontouchend="this.style.opacity='0.9'; setTimeout(() => window.open('https://noahs-calculus-tutor.pages.dev/', '_blank'), 100);"
		                               style="
		                                  all: initial !important;
		                                  position: fixed !important;
		                                  bottom: 10px !important;
		                                  right: 10px !important;
		                                  background: rgba(0, 0, 0, 0.85) !important;
		                                  color: #c27c15 !important;
		                                  padding: 8px 12px !important;
		                                  border-radius: 5px !important;
		                                  font-family: 'Courier New', monospace !important;
		                                  font-size: 12px !important;
		                                  z-index: 2147483647 !important;
		                                  border: 1px solid #c27c15 !important;
		                                  opacity: 0.9 !important;
		                                  pointer-events: auto !important;
		                                  cursor: pointer !important;
		                                  display: flex !important;
		                                  align-items: center !important;
		                                  gap: 8px !important;
		                                  backdrop-filter: blur(4px) !important;
		                                  box-shadow: 0 0 15px rgba(194, 124, 21, 0.4) !important;
		                                  transition: opacity 0.2s, transform 0.1s !important;
		                                  user-select: none !important;
		                                  -webkit-tap-highlight-color: transparent !important;
		                              ">
		                              <img src="https://raw.githubusercontent.com/NoahsAmazingTutoringHelp/Noahs-Calculus-Tutor/master/cuh.png"
		                                   alt="Noah's Tutoring Hub"
		                                   style="width: 16px !important; height: 16px !important; border-radius: 3px !important; pointer-events: none !important;"
		                                   onerror="this.style.display='none'">
		                              <span style="pointer-events: none !important;">Downloaded from Noah's Tutoring Hub</span>
		                          </div>
		                       
		                          <script>
		                              (function() {
		                                  var gameTitle = "Real Flight Simulator";

		                                  function createWatermark() {
		                                      const watermark = document.createElement('div');
		                                      watermark.id = 'noahs-watermark';

		                                      const logo = document.createElement('img');
		                                      logo.src = 'https://raw.githubusercontent.com/NoahsAmazingTutoringHelp/Noahs-Calculus-Tutor/master/cuh.png';
		                                      logo.alt = "Noah's Tutoring Hub";
		                                      logo.style.cssText = 'width: 16px !important; height: 16px !important; border-radius: 3px !important; display: block !important; pointer-events: none !important;';

		                                      const text = document.createElement('span');
		                                      text.textContent = 'Downloaded from Noah\'s Tutoring Hub';
		                                      text.style.cssText = 'pointer-events: none !important;';

		                                      watermark.appendChild(logo);
		                                      watermark.appendChild(text);

		                                      watermark.setAttribute('style',
		                                          'all: initial !important;' +
		                                          'position: fixed !important;' +
		                                          'bottom: 10px !important;' +
		                                          'right: 10px !important;' +
		                                          'background: rgba(0, 0, 0, 0.85) !important;' +
		                                          'color: #c27c15 !important;' +
		                                          'padding: 8px 12px !important;' +
		                                          'border-radius: 5px !important;' +
		                                          'font-family: \'Courier New\', monospace !important;' +
		                                          'font-size: 12px !important;' +
		                                          'z-index: 2147483647 !important;' +
		                                          'border: 1px solid #c27c15 !important;' +
		                                          'opacity: 0.9 !important;' +
		                                          'pointer-events: auto !important;' +
		                                          'cursor: pointer !important;' +
		                                          'display: flex !important;' +
		                                          'align-items: center !important;' +
		                                          'gap: 8px !important;' +
		                                          'backdrop-filter: blur(4px) !important;' +
		                                          'box-shadow: 0 0 15px rgba(194, 124, 21, 0.4) !important;' +
		                                          'transition: opacity 0.2s, transform 0.1s, box-shadow 0.2s, border-color 0.2s !important;' +
		                                          'user-select: none !important;' +
		                                          '-webkit-tap-highlight-color: transparent !important;'
		                                      );

		                                      logo.onerror = function() {
		                                          this.style.display = 'none';
		                                          watermark.setAttribute('style', watermark.getAttribute('style') + 'padding-left: 12px !important;');
		                                      };

		                                      watermark.setAttribute('role', 'button');
		                                      watermark.setAttribute('aria-label', 'Visit Noah\'s Tutoring Hub website');
		                                      watermark.setAttribute('tabindex', '0');

		                                      watermark.addEventListener('click', function(e) {
		                                          e.preventDefault();
		                                          e.stopPropagation();

		                                          this.style.transform = 'scale(0.95) !important';
		                                          this.style.transition = 'transform 0.1s !important';

		                                          setTimeout(() => {
		                                              this.style.transform = 'scale(1) !important';
		                                              window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
		                                          }, 100);
		                                      });

		                                      watermark.addEventListener('touchstart', function(e) {
		                                          e.preventDefault();
		                                          e.stopPropagation();
		                                          this.style.opacity = '0.7 !important';
		                                      });

		                                      watermark.addEventListener('touchend', function(e) {
		                                          e.preventDefault();
		                                          e.stopPropagation();
		                                          this.style.opacity = '0.9 !important';

		                                          this.style.transform = 'scale(0.95) !important';

		                                          setTimeout(() => {
		                                              this.style.transform = 'scale(1) !important';
		                                              window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
		                                          }, 100);
		                                      });

		                                      watermark.addEventListener('keydown', function(e) {
		                                          if (e.key === 'Enter' || e.key === ' ') {
		                                              e.preventDefault();
		                                              window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
		                                          }
		                                      });

		                                      watermark.addEventListener('mouseenter', function() {
		                                          this.style.opacity = '1 !important';
		                                          this.style.transform = 'translateY(-2px) !important';
		                                          this.style.boxShadow = '0 0 25px rgba(194, 124, 21, 0.8) !important';
		                                          this.style.borderColor = '#e69500 !important';
		                                      });

		                                      watermark.addEventListener('mouseleave', function() {
		                                          this.style.opacity = '0.9 !important';
		                                          this.style.transform = 'translateY(0) !important';
		                                          this.style.boxShadow = '0 0 15px rgba(194, 124, 21, 0.4) !important';
		                                          this.style.borderColor = '#c27c15 !important';
		                                      });

		                                      watermark.addEventListener('contextmenu', function(e) {
		                                          e.preventDefault();
		                                          return false;
		                                      });

		                                      return watermark;
		                                  }

		                                  function addWatermark() {
		                                      const existing = document.getElementById('noahs-watermark');
		                                      if (!existing) {
		                                          document.body.appendChild(createWatermark());
		                                      }
		                                  }

		                                  function protectWatermark() {
		                                      addWatermark();

		                                      const observer = new MutationObserver(function(mutations) {
		                                          mutations.forEach(function(mutation) {
		                                              if (mutation.removedNodes) {
		                                                  Array.from(mutation.removedNodes).forEach(function(node) {
		                                                      if (node.id === 'noahs-watermark' ||
		                                                          (node.querySelector && node.querySelector('#noahs-watermark'))) {
		                                                          setTimeout(addWatermark, 100);
		                                                      }
		                                                  });
		                                              }
		                                          });
		                                      });

		                                      observer.observe(document.body, {
		                                          childList: true,
		                                          subtree: true
		                                      });

		                                      setInterval(addWatermark, 5000);
		                                  }

		                                  if (document.readyState === 'loading') {
		                                      document.addEventListener('DOMContentLoaded', protectWatermark);
		                                  } else {
		                                      protectWatermark();
		                                  }

		                                  console.log('%cðŸŽ® Game: "' + gameTitle + '", Downloaded from Noah\'s Tutoring Hub',
		                                      'color: #c27c15; font-weight: bold; font-size: 14px;');
		                                  console.log('%cðŸ“š Visit https://noahs-calculus-tutor.pages.dev/ for more games!',
		                                      'color: #e69500;');
		                              })();
		                          </script>
		                       </body>

</html>